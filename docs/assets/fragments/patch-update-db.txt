3. Check the current version of the Custom Resource and what versions of the database and cluster components are compatible with it. Use the following command:

    ``` {.bash data-prompt="$" }
    $ curl https://check.percona.com/versions/v1/pxc-operator/{{release}} |jq -r ‘.versions[].matrix’
    ```

    You can also find this information in the [Versions compatibility](versions.md) matrix.


4. Update the Custom Resource, the database, backup, proxy and PMM Client image names with a newer version tag. Find the image names [in the list of certified images](images.md).

    We recommend to update the PMM Server **before** the upgrade of PMM Client. If you haven't done it yet, exclude PMM Client from the list of images to update.

    Since this is a working cluster, the way to update the Custom Resource is to [apply a patch  :octicons-link-external-16:](https://kubernetes.io/docs/tasks/run-application/update-api-object-kubectl-patch/) with the `kubectl patch pxc` command.

    === "With PMM Client"

        === "For Percona XtraDB Cluster 8.0"

            ```{.bash data-prompt="$"}
            $ kubectl patch pxc cluster1 --type=merge --patch '{
               "spec": {
                   "crVersion":"{{ release }}",
                   "pxc":{ "image": "percona/percona-xtradb-cluster:{{ pxc80recommended }}" },
                   "proxysql": { "image": "percona/proxysql2:{{ proxysqlrecommended }}" },
                   "haproxy":  { "image": "percona/haproxy:{{ haproxyrecommended }}" },
                   "backup":   { "image": "percona/percona-xtrabackup:{{ pxb80recommended }}" },
                   "logcollector": { "image": "percona/fluentbit:{{ fluentbitrecommended }}" },
                   "pmm":      { "image": "percona/pmm-client:{{ pmm2recommended }}" }
               }}'
            ```

        === "For Percona XtraDB Cluster 5.7"

            ```{.bash data-prompt="$"}
            $ kubectl patch pxc cluster1 --type=merge --patch '{
               "spec": {
                   "crVersion":"{{ release }}",
                   "pxc":{ "image": "percona/percona-xtradb-cluster:{{ pxc57recommended }}" },
                   "proxysql": { "image": "percona/proxysql2:{{ proxysqlrecommended }}" },
                   "haproxy":  { "image": "percona/haproxy:{{ haproxyrecommended }}" },
                   "backup":   { "image": "percona/percona-xtrabackup:{{ pxb57recommended }}" },
                   "logcollector": { "image": "percona/fluentbit:{{ fluentbitrecommended }}" },
                   "pmm":      { "image": "percona/pmm-client:{{ pmm2recommended }}" }
               }}'
            ```

    === "Without PMM Client"

        === "For Percona XtraDB Cluster 8.0"

            ```{.bash data-prompt="$"}
            $ kubectl patch pxc cluster1 --type=merge --patch '{
               "spec": {
                   "crVersion":"{{ release }}",
                   "pxc":{ "image": "percona/percona-xtradb-cluster:{{ pxc80recommended }}" },
                   "proxysql": { "image": "percona/proxysql2:{{ proxysqlrecommended }}" },
                   "haproxy":  { "image": "percona/haproxy:{{ haproxyrecommended }}" },
                   "backup":   { "image": "percona/percona-xtrabackup:{{ pxb80recommended }}" },
                   "logcollector": { "image": "percona/fluentbit:{{ fluentbitrecommended }}" }
               }}'
            ```

        === "For Percona XtraDB Cluster 5.7"

            ```{.bash data-prompt="$"}
            $ kubectl patch pxc cluster1 --type=merge --patch '{
               "spec": {
                   "crVersion":"{{ release }}",
                   "pxc":{ "image": "percona/percona-xtradb-cluster:{{ pxc57recommended }}" },
                   "proxysql": { "image": "percona/proxysql2:{{ proxysqlrecommended }}" },
                   "haproxy":  { "image": "percona/haproxy:{{ haproxyrecommended }}" },
                   "backup":   { "image": "percona/percona-xtrabackup:{{ pxb57recommended }}" },
                   "logcollector": { "image": "percona/fluentbit:{{ fluentbitrecommended }}" }
               }}'
            ```